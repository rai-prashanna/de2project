version: "3"
services:
  producer:
    image: patrick931024/g3-producer:v2
    depends_on:
      - pulsarbroker
    links:  
      - pulsarbroker:pulsarbroker
    volumes:
      - ./Producers:/app
    command: /bin/sh -c "sleep 90 && python /app/q1-producer.py rai-prashanna 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"
    #command: /bin/sh -c "sleep 1200000000000" 
    
  pulsarbroker:
    hostname: pulsarbroker
    image: apachepulsar/pulsar:2.10.0
    ports:
      - "6650:6650"
      - "8080:8080"
    command: bin/pulsar standalone
  consumer:
    image: patrick931024/g3-consumer:v2
    depends_on:
      - pulsarbroker
    links:  
      - pulsarbroker:pulsarbroker
    volumes:
      - ./Consumers:/app
    command: /bin/sh -c "sleep 300 && python /app/q1-consumer.py 10" 
